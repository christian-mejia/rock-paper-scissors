<html>
    <head>
        <title>Rock Paper Scissors</title>
    </head>

    <body>
        <script>
            let computerSelection = '';
            let playerSelection = '';
            let result = '';
            let gameResult = '';
            let playerScore = 0;
            let computerScore = 0;

            function computerPlay() {
                let cpuTurn = Math.floor(Math.random(1) * 3);
                let cpuResult = (cpuTurn === 0) ? 'Rock' : 
                                (cpuTurn === 1) ? 'Paper' :
                                'Scissors';
                return cpuResult;            
            }
            
            function playRound(playerSelection, computerSelection) {
                playerSelection = playerSelection.charAt(0).toUpperCase() + playerSelection.slice(1).toLowerCase();
                
                if (playerSelection == computerSelection) {
                    roundResult = "Tie!"
                } else if ((playerSelection == 'Rock' & computerSelection == 'Paper') 
                        || (playerSelection == 'Paper' & computerSelection == 'Scissors')
                        || (playerSelection == 'Scissors' && computerSelection == 'Rock')){
                    roundResult = 'You lose! ' + computerSelection + ' beats ' + playerSelection;
                } else {
                    roundResult = "You win! " + playerSelection + ' beats ' + computerSelection;
                }
                return roundResult;
            }

            function game(){
                for (var i =0; i < 5; i++) {
                    let userInput = prompt('Rock, paper, or scissors?', 'Choose wisely')
                    let computerChoice = computerPlay();
                    playRound(userInput, computerChoice);
                    if (roundResult.includes('win')){
                        playerScore++;
                    } else if (roundResult.includes('lose')) {
                        computerScore++;
                    }
                    console.log(roundResult);
                }

                if (playerScore > computerScore) {
                    gameResult = 'You win the game!';
                } else if (computerScore > playerScore) {
                    gameResult = 'You lose the game!';
                } else {
                    gameResult = 'Tie!';
                }
                console.log(gameResult);
            }
            game();
        </script>
    </body>
</html>